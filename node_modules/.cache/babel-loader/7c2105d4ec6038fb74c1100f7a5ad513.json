{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _downshift = _interopRequireDefault(require(\"downshift\"));\n\nvar _Icon = _interopRequireDefault(require(\"../Icon/Icon\"));\n\nvar _shared = require(\"../shared\");\n\nvar _theme = require(\"../shared/theme\");\n\nvar _subComponents = require(\"../Input/sub-components\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar ID_GENERATOR = (0, _shared.uniqId)('dropdown-');\nvar ITEM_HEIGHT = '44px';\nvar MAX_ITEMS_VISIBILITY = 7;\nvar DropInput = (0, _styledComponents.default)(_subComponents.TextInput).withConfig({\n  displayName: \"Dropdown__DropInput\",\n  componentId: \"xoew8d-0\"\n})([\"align-items:center;cursor:pointer;display:flex;justify-content:space-between;\", \";\"], function (_ref) {\n  var selectedItem = _ref.selectedItem,\n      text = _ref.text,\n      neutral500 = _ref.theme.colors.neutral[500];\n  return \"\\n    \".concat(!text ? 'flex-direction: row-reverse;' : '', \"\\n    \").concat(!selectedItem ? \"color: \".concat(neutral500, \";\") : '', \"\\n  \");\n});\nvar ArrowDown = (0, _styledComponents.default)(_Icon.default).attrs({\n  name: 'keyboard_arrow_down'\n}).withConfig({\n  displayName: \"Dropdown__ArrowDown\",\n  componentId: \"xoew8d-1\"\n})([\"pointer-events:none;\", \"\"], function (_ref2) {\n  var selectedItem = _ref2.selectedItem,\n      neutral700 = _ref2.theme.colors.neutral[700];\n  return !selectedItem && \"\\n    color: \".concat(neutral700, \";\\n  \");\n});\nvar InputArrowDown = (0, _styledComponents.default)(ArrowDown).withConfig({\n  displayName: \"Dropdown__InputArrowDown\",\n  componentId: \"xoew8d-2\"\n})([\"position:absolute;\", \"\"], function (_ref3) {\n  var _ref3$theme$spacing = _ref3.theme.spacing,\n      small = _ref3$theme$spacing.small,\n      medium = _ref3$theme$spacing.medium;\n  return \"\\n    top: \".concat(small, \"px;\\n    right: \").concat(medium * 0.875, \"px;\\n  \");\n});\n\nvar DropList = _styledComponents.default.ul.withConfig({\n  displayName: \"Dropdown__DropList\",\n  componentId: \"xoew8d-3\"\n})([\"border-radius:4px;box-sizing:border-box;list-style:none;max-height:calc(\", \" * \", \");overflow:auto;padding:0;position:absolute;width:100%;z-index:9999;\", \"\"], ITEM_HEIGHT, MAX_ITEMS_VISIBILITY, function (_ref4) {\n  var theme = _ref4.theme;\n  var xxsmall = theme.spacing.xxsmall,\n      _theme$colors$neutral = theme.colors.neutral,\n      neutral100 = _theme$colors$neutral[100],\n      neutral300 = _theme$colors$neutral[300];\n  return \"\\n      background-color: \".concat(neutral100, \";\\n      border: solid 1.5px \").concat(neutral100, \";\\n      margin-top: \").concat(xxsmall, \"px;\\n      \").concat((0, _shared.shadow)(5, neutral300)({\n    theme: theme\n  }), \";\\n    \");\n});\n\nvar CheckIcon = (0, _styledComponents.default)(_Icon.default).attrs({\n  name: 'check'\n}).withConfig({\n  displayName: \"Dropdown__CheckIcon\",\n  componentId: \"xoew8d-4\"\n})([\"\", \"\"], function (_ref5) {\n  var selectedItem = _ref5.selectedItem,\n      primary = _ref5.theme.colors.primary[500];\n  return !selectedItem && \"\\n    color: \".concat(primary, \";\\n  \");\n});\n\nvar DropItem = _styledComponents.default.li.withConfig({\n  displayName: \"Dropdown__DropItem\",\n  componentId: \"xoew8d-5\"\n})([\"box-sizing:border-box;cursor:pointer;\", \":last-child{border-bottom-width:0;}&[aria-selected='true']{\", \"}\", \"\"], function (_ref6) {\n  var _ref6$theme = _ref6.theme,\n      _ref6$theme$spacing = _ref6$theme.spacing,\n      xsmall = _ref6$theme$spacing.xsmall,\n      small = _ref6$theme$spacing.small,\n      _ref6$theme$colors$ne = _ref6$theme.colors.neutral,\n      neutral100 = _ref6$theme$colors$ne[100],\n      neutral300 = _ref6$theme$colors$ne[300];\n  return \"\\n    background-color: \".concat(neutral100, \";\\n    border-bottom: solid 1.5px \").concat(neutral300, \";\\n    padding: \").concat(xsmall * 1.125, \"px \").concat(small, \"px;\\n  \");\n}, function (_ref7) {\n  var primary = _ref7.theme.colors.primary[100];\n  return \"\\n      background-color: \".concat(primary, \";\\n    \");\n}, function (_ref8) {\n  var isSelected = _ref8.isSelected;\n  return isSelected && \"\\n    display: flex;\\n    justify-content: space-between;\\n  \";\n});\n\nvar DropContainer = _styledComponents.default.div.withConfig({\n  displayName: \"Dropdown__DropContainer\",\n  componentId: \"xoew8d-6\"\n})([\"position:relative;\"]);\n\nvar _getValue = function _getValue(item) {\n  return item ? item.value || item.label || item : '';\n};\n\nvar _getLabel = function _getLabel(item) {\n  return item ? item.label || item.value || item : '';\n};\n\nvar _isEqual = function _isEqual(selected, item) {\n  return _getValue(selected) === _getValue(item);\n};\n\nvar itemPropType = _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.shape({\n  value: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.number]),\n  label: _propTypes.default.string\n})]);\n\nvar List = function List(_ref9) {\n  var theme = _ref9.theme,\n      items = _ref9.items,\n      selectedItem = _ref9.selectedItem,\n      getItemProps = _ref9.getItemProps;\n  return _react.default.createElement(DropList, {\n    theme: theme\n  }, items.map(function (item) {\n    return _react.default.createElement(DropItem, _extends({\n      theme: theme\n    }, getItemProps({\n      item: item,\n      isSelected: _isEqual(selectedItem, item),\n      key: _getValue(item)\n    })), _getLabel(item), _isEqual(selectedItem, item) && _react.default.createElement(CheckIcon, {\n      theme: theme\n    }));\n  }));\n};\n\nList.propTypes = {\n  selectedItem: _propTypes.default.shape(itemPropType).isRequired,\n  theme: _propTypes.default.shape({\n    colors: _propTypes.default.object,\n    spacing: _propTypes.default.object\n  }).isRequired,\n  items: _propTypes.default.arrayOf(itemPropType).isRequired,\n  getItemProps: _propTypes.default.func.isRequired\n};\n\nvar Dropdown = function Dropdown(_ref10) {\n  var label = _ref10.label,\n      error = _ref10.error,\n      required = _ref10.required,\n      disabled = _ref10.disabled,\n      items = _ref10.items,\n      placeholder = _ref10.placeholder,\n      selectedItem = _ref10.selectedItem,\n      onChange = _ref10.onChange,\n      autocomplete = _ref10.autocomplete,\n      theme = _ref10.theme,\n      id = _ref10.id,\n      rest = _objectWithoutProperties(_ref10, [\"label\", \"error\", \"required\", \"disabled\", \"items\", \"placeholder\", \"selectedItem\", \"onChange\", \"autocomplete\", \"theme\", \"id\"]);\n\n  var _buttonLabel = selectedItem ? _getLabel(selectedItem) : placeholder;\n\n  var _highlightedReducer = function _highlightedReducer(_ref11, changes) {\n    var selected = _ref11.selectedItem;\n\n    if (changes.isOpen !== undefined && changes.isOpen) {\n      var selectedIndex = items.map(_getValue).indexOf(_getValue(selected));\n      var withRange = selectedIndex + Math.floor(MAX_ITEMS_VISIBILITY / 2);\n      var length = items.length;\n      return _objectSpread({}, changes, {\n        highlightedIndex: withRange < length ? withRange : length - 1\n      });\n    }\n\n    return changes;\n  };\n\n  var _useState = (0, _react.useState)(id || ID_GENERATOR.next().value),\n      _useState2 = _slicedToArray(_useState, 1),\n      _id = _useState2[0];\n\n  var inputFilter = function inputFilter(value) {\n    return items.filter(function (item) {\n      return _getValue(item).toLowerCase().indexOf(value.toLowerCase()) > -1;\n    });\n  };\n\n  return _react.default.createElement(_shared.FieldGroup, null, _react.default.createElement(_downshift.default, _extends({}, rest, {\n    selectedItem: selectedItem,\n    onChange: onChange,\n    itemToString: _getValue,\n    stateReducer: _highlightedReducer\n  }), function (_ref12) {\n    var getRootProps = _ref12.getRootProps,\n        getLabelProps = _ref12.getLabelProps,\n        getInputProps = _ref12.getInputProps,\n        getToggleButtonProps = _ref12.getToggleButtonProps,\n        getItemProps = _ref12.getItemProps,\n        inputValue = _ref12.inputValue,\n        openMenu = _ref12.openMenu,\n        isOpen = _ref12.isOpen;\n    var filteredInput = isOpen ? inputFilter(inputValue) : [];\n    return _react.default.createElement(DropContainer, getRootProps(), label && _react.default.createElement(_subComponents.InputLabel, _extends({}, getLabelProps(), {\n      error: error,\n      disabled: disabled,\n      htmlFor: _id\n    }), label, required && _react.default.createElement(_subComponents.RequiredMark, null, \"*\")), _react.default.createElement(\"input\", _extends({\n      type: \"hidden\"\n    }, getInputProps())), autocomplete ? _react.default.createElement(_react.default.Fragment, null, _react.default.createElement(DropContainer, null, _react.default.createElement(DropInput, _extends({}, getInputProps({\n      isOpen: isOpen,\n      placeholder: placeholder,\n      onClick: openMenu\n    }), {\n      style: {\n        cursor: 'inherit'\n      },\n      error: error,\n      disabled: disabled,\n      text: _buttonLabel,\n      theme: theme,\n      id: _id\n    })), _react.default.createElement(InputArrowDown, {\n      theme: theme\n    })), filteredInput.length > 0 && _react.default.createElement(List, {\n      items: filteredInput,\n      theme: theme,\n      selectedItem: selectedItem,\n      getItemProps: getItemProps\n    })) : _react.default.createElement(_react.default.Fragment, null, _react.default.createElement(DropInput, _extends({}, getToggleButtonProps(), {\n      as: \"button\",\n      isOpen: isOpen,\n      disabled: disabled,\n      error: error,\n      text: _buttonLabel,\n      selectedItem: selectedItem,\n      theme: theme,\n      id: _id\n    }), _buttonLabel, _react.default.createElement(ArrowDown, {\n      theme: theme\n    })), isOpen && _react.default.createElement(List, {\n      items: items,\n      theme: theme,\n      selectedItem: selectedItem,\n      getItemProps: getItemProps\n    })));\n  }), error && _react.default.createElement(_subComponents.InputErrorMessage, null, error));\n};\n\nDropdown.defaultProps = {\n  autocomplete: false,\n  disabled: false,\n  required: false,\n  error: '',\n  id: '',\n  label: '',\n  placeholder: 'Select an option',\n  selectedItem: '',\n  items: [],\n  onChange: function onChange() {},\n  theme: {\n    colors: _theme.colors,\n    spacing: _theme.spacing\n  }\n};\nDropdown.propTypes = {\n  autocomplete: _propTypes.default.bool,\n  disabled: _propTypes.default.bool,\n  required: _propTypes.default.bool,\n  error: _propTypes.default.string,\n  id: _propTypes.default.string,\n  label: _propTypes.default.string,\n  placeholder: _propTypes.default.string,\n  selectedItem: itemPropType,\n  onChange: _propTypes.default.func,\n\n  /** A list of string or objects with value and label keys */\n  items: _propTypes.default.arrayOf(itemPropType),\n  theme: _propTypes.default.shape({\n    colors: _propTypes.default.object,\n    spacing: _propTypes.default.object\n  })\n};\nvar _default = Dropdown;\nexports.default = _default;","map":null,"metadata":{},"sourceType":"script"}